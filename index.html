<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PortalVR ‚Äî –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
<style>
  /* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Tactic Sans —Å GitHub */
  @font-face {
    font-family: 'TacticSans';
    src: url('https://raw.githubusercontent.com/jjjxxx2016-creator/PVVR/main/Tactic%20Sans/TacticSans-Reg.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: 'TacticSans';
    src: url('https://raw.githubusercontent.com/jjjxxx2016-creator/PVVR/main/Tactic%20Sans/TacticSans-Bld.otf') format('opentype');
    font-weight: bold;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: 'TacticSans';
    src: url('https://raw.githubusercontent.com/jjjxxx2016-creator/PVVR/main/Tactic%20Sans/TacticSans-Lgt.otf') format('opentype');
    font-weight: 300;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: 'TacticSans';
    src: url('https://raw.githubusercontent.com/jjjxxx2016-creator/PVVR/main/Tactic%20Sans/TacticSans-Med.otf') format('opentype');
    font-weight: 500;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: 'TacticSans';
    src: url('https://raw.githubusercontent.com/jjjxxx2016-creator/PVVR/main/Tactic%20Sans/TacticSans-Blk.otf') format('opentype');
    font-weight: 900;
    font-style: normal;
    font-display: swap;
  }

  :root{
    --bg1:#06060a;
    --bg2:#0f0f13;
    --accent1:#ff004f;
    --accent2:#1e8cff;
    --card:#0f0f12;
    --input:#121212;
    --text:#eaeaea;
    
    /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–∞—à —à—Ä–∏—Ñ—Ç */
    --font-primary: 'TacticSans', sans-serif;
  }
  
  html,body{
    height:100%;
    margin:0;
    background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('4acef07e-9517-4366-b3e0-8aaad63432f6.png') no-repeat center center fixed;
    background-size: cover;
    font-family: var(--font-primary);
    color: var(--text);
    font-size: 20px;
    font-weight: normal;
  }
  
  .container{max-width:1100px;margin:24px auto;padding:20px;}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
  
  .logo {
    width:64px;height:64px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    box-shadow:0 8px 40px rgba(255,0,80,0.12);
    display:flex;align-items:center;justify-content:center;
    font-weight: 900;
    color:#fff;
    font-size: 20px;
    font-family: var(--font-primary);
    letter-spacing: 1px;
  }
  
  h1{
    font-size:28px;
    margin:0;
    color:var(--accent1);
    text-shadow:0 0 12px rgba(255,0,80,0.15);
    font-family: var(--font-primary);
    font-weight: 900;
    letter-spacing: 0.5px;
  }
  
  p.lead{
    color:#cfcfcf;
    margin-top:6px;
    margin-bottom:18px;
    font-family: var(--font-primary);
    font-weight: 300;
    font-size: 18px;
  }

  /* form card */
  .card{background:linear-gradient(180deg,rgba(10,10,12,0.9),rgba(6,6,8,0.85));border-radius:14px;padding:20px;border:1px solid rgba(255,0,80,0.06);box-shadow:0 12px 40px rgba(0,0,0,0.6)}
  .field{margin-bottom:14px}
  .field label{display:block;color:#cfcfcf;margin-bottom:6px;font-size:14px;font-family: var(--font-primary);font-weight: 500;}
  .centered{display:flex;justify-content:center}
  
  input[type="tel"], input[type="text"], input[type="number"], textarea{
    width:100%;max-width:560px;padding:12px;border-radius:10px;border:none;background:var(--input);color:var(--text);font-size:15px;box-shadow:inset 0 3px 18px rgba(0,0,0,0.6);
    outline:none;
    font-family: var(--font-primary);
    font-weight: normal;
  }
  textarea{min-height:96px;resize:vertical}

  /* heading for selection blocks */
  .section-title{
    margin-top:22px;
    margin-bottom:12px;
    color:var(--accent2);
    font-size: 22px;
    text-shadow:0 0 8px rgba(30,140,255,0.08);
    font-family: var(--font-primary);
    font-weight: 700;
    letter-spacing: 0.3px;
  }

  /* options grid */
  .options-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
  .card-option{
    background:linear-gradient(180deg,rgba(18,18,20,0.7),rgba(12,12,14,0.7));
    border-radius:12px;overflow:hidden;cursor:pointer;position:relative;border:2px solid rgba(255,255,255,0.02);
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .card-option:hover{transform:translateY(-6px);box-shadow:0 10px 40px rgba(255,0,80,0.06)}
  .card-option .media{width:100%;height:140px;background-size:cover;background-position:center}
  .card-option .caption{padding:10px;font-size:14px;color:#e6e6e6;font-family: var(--font-primary);}
  .card-option .more{font-size:12px;color:#bfcfff;text-decoration:underline;display:block;margin-top:6px}

  /* neon border effect via pseudo element */
  .card-option::before{
    content:"";
    position:absolute;inset:-2px;border-radius:14px;
    background:linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent1));
    background-size:300% 300%;filter:blur(10px);opacity:0.9;z-index:1;pointer-events:none;
    animation:shift 4s linear infinite;
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
  }
  .card-option > *{position:relative;z-index:2}
  @keyframes shift {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  /* small helpers */
  .muted{color:#bdbdbd;font-size:13px;font-family: var(--font-primary);}
  .links a{color:#89bfff;text-decoration:underline}
  .submit-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:18px}
  .btn{
    padding:12px 18px;border-radius:12px;border:none;cursor:pointer;font-weight:700;color:#fff;background:linear-gradient(90deg,var(--accent1),var(--accent2));
    background-size:200% 100%;animation:shift 3s linear infinite;box-shadow:0 12px 40px rgba(255,0,80,0.12);
    font-family: var(--font-primary);
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  .result{margin-left:12px;color:#bfeadf;font-weight:700;font-family: var(--font-primary);}

  /* responsive */
  @media(max-width:720px){ .centered input{max-width:100%} .card-option .media{height:120px} }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">PV</div>
      <div>
        <h1>PortalVR</h1>
        <p class="lead">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É ‚Äî –º—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–º –±—Ä–æ–Ω—å –∏ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏</p>
      </div>
    </header>

    <div class="card" id="mainCard">
      <!-- Phone -->
      <div class="field">
        <label>–ù–∞–ø–∏—à–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –±—Ä–æ–Ω—å</label>
        <div class="centered">
          <input id="phone" type="tel" placeholder="+7 (___) ___-__-__" style="max-width:480px">
        </div>
      </div>

      <!-- Name -->
      <div class="field">
        <label>–ö–∞–∫ –∑–æ–≤—É—Ç –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞/—Ü—É –∏ —Å–∫–æ–ª—å–∫–æ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–µ—Ç?</label>
        <div class="centered">
          <input id="birthdayName" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω, 7 –ª–µ—Ç" style="max-width:560px">
        </div>
      </div>

      <!-- Guests -->
      <div class="field">
        <label>–£—Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∫–æ–ª-–≤–æ –≥–æ—Å—Ç–µ–π!</label>
        <div class="centered">
          <input id="guests" type="number" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 12" style="max-width:200px">
        </div>
      </div>

      <!-- spacer -->
      <div style="height:16px"></div>

      <!-- Servirovka -->
      <div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Ä–æ–≤–∫—É —Å—Ç–æ–ª–∞</div>
      <div class="options-grid" id="servirovkaGrid">
        <!-- variant blocks will be injected by JS -->
      </div>

      <!-- food link -->
      <p class="muted links" style="margin-top:12px">
        <a href="https://qsmenu.ru/vr-portal" target="_blank">–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å –ï–î–£ –∏ –ù–ê–ü–ò–¢–ö–ò –æ—Ç –Ω–∞—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.</a> (–¥–æ—Å—Ç–∞–≤–∫–∞ —Å—Ç—Ä–æ–≥–æ –∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º—É —Å –≤–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏, –æ–ø–ª–∞—Ç–∞ –ø–æ —Ñ–∞–∫—Ç—É –ø–æ–ª—É—á–µ–Ω–∏—è)
      </p>

      <p class="muted links">
        <a href="https://disk.yandex.ru/d/3wBKih50e0TU_A" target="_blank">–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å –∫–æ—Ñ–µ!</a> –°–∫–∏–¥–∫–∞ –Ω–∞ –ø—Ä–µ–¥–∑–∞–∫–∞–∑ 20%
      </p>

      <!-- Balloons info -->
      <div class="section-title" style="margin-top:16px">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤–æ–∑–¥—É—à–Ω—ã–º–∏ —à–∞—Ä–∞–º–∏</div>
      <p class="muted">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤–æ–∑–¥—É—à–Ω—ã–º–∏ —à–∞—Ä–∞–º–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ –ü–∞–∫–µ—Ç ¬´–ü—Ä–µ–º–∏—É–º¬ª –∏ ¬´–ü—Ä–µ–º–∏—É–º –ü–ª—é—Å¬ª. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —à–∞—Ä–∏–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –∫ –ª—é–±–æ–º—É –∏–∑ —Ç–∞—Ä–∏—Ñ–æ–≤, –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —É—Å–ª—É–≥—É. –®–∞—Ä-—Ü–∏—Ñ—Ä–∞ —Å –≥–µ–ª–∏–µ–º =1000 –ú–∞–ª—ã–π —Ñ–æ–Ω—Ç–∞–Ω —Å –æ–¥–Ω–æ–π —à–∞—Ä–æ–º-—Ü–∏—Ñ—Ä–æ–π =2500 –ú–∞–ª—ã–π —Ñ–æ–Ω—Ç–∞–Ω –¥–≤–µ —Ü–∏—Ñ—Ä—ã =3000 –ë–æ–ª—å—à–æ–π —Ñ–æ–Ω—Ç–∞–Ω = 3500 ... –§–æ—Ç–æ –Ω–æ—Å—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.üòâ</p>

      <div class="section-title">–ü—Ä–∏–º–µ—Ä—ã —Ñ–æ–Ω—Ç–∞–Ω–æ–≤ –∏–∑ –≤–æ–∑–¥—É—à–Ω—ã—Ö —à–∞—Ä–æ–≤</div>
      <div class="options-grid" id="balloonsGrid"></div>

      <!-- Show programs -->
      <div class="section-title" style="margin-top:18px">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Å —à–æ—É –ø—Ä–æ–≥—Ä–∞–º–º–æ–π!</div>
      <div class="options-grid" id="showsGrid"></div>

      <p class="muted" style="margin-top:12px">–ò –≤ –∫–æ–Ω—Ü–µ ‚Äî –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞:</p>
      <div class="field">
        <textarea id="wishes" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ë–µ–∑ –ø–∏—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∏, —Ñ—Ä—É–∫—Ç–æ–≤—ã–π —Ç–æ—Ä—Ç..."></textarea>
      </div>

      <div class="submit-row">
        <button class="btn" id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <div class="result" id="resultMsg"></div>
      </div>
    </div>
  </div>

<script>
/* Helper: normalize a drive link (/file/d/ID/view) -> uc link */
// driveToUc —É–¥–∞–ª–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ Imgur

/* Data: servirovka variants (each variant contains array of media links) */
const servirovka = [
  // Variant 1 (5 links)
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 2 (mix: one view link converted + uc links)
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 3
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 4
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 5
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 6
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 7
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 8
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ],
  // Variant 9
  [
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg',
    'https://i.imgur.com/abc1234.jpg'
  ]
];

/* Balloons fountain examples (4 links) */
const balloons = [
  'https://i.imgur.com/abc1234.jpg',
  'https://i.imgur.com/abc1234.jpg',
  'https://i.imgur.com/abc1234.jpg',
  'https://i.imgur.com/abc1234.jpg'
];

/* Shows block: small selection mapping with media arrays and details text */
const shows = [
  {
    id:'happybd',
    title:'–†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ "Happy BDay" ‚Äî 60 –º–∏–Ω (8000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/KBs6Hew'
  },
  {
    id:'neon-disco',
    title:'–ù–µ–æ–Ω–æ–≤–∞—è –¥–∏—Å–∫–æ—Ç–µ–∫–∞ ‚Äî 30 –º–∏–Ω (6000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/62bgO8L'
  },
  {
    id:'pinata',
    title:'–ü–∏–Ω—å—è—Ç–∞ (3000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/eBvy8p3'
  },
  {
    id:'surprise-box',
    title:'–ö–æ—Ä–æ–±–∫–∞‚Äë—Å—é—Ä–ø—Ä–∏–∑ (3000 ‚ÇΩ)',
    media:['https://i.imgur.com/abc1234.jpg'],
    more:'https://imgur.com/a/HxtXLup'
  },
  {
    id:'minecraft',
    title:'–®–æ—É –ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç ‚Äî 60 –º–∏–Ω (7000 ‚ÇΩ)',
    media:[],
    more:'#'
  },
  {
    id:'neon-bubbles',
    title:'–ù–µ–æ–Ω–æ–≤—ã–µ –º—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏ ‚Äî 60 –º–∏–Ω (11000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/x10HsmX'
  },
  {
    id:'cryo',
    title:'–ö—Ä–∏–æ‚Äë—à–æ—É —Å –º–æ—Ä–æ–∂–µ–Ω—ã–º ‚Äî 60 –º–∏–Ω (9000 ‚ÇΩ)',
    media:[],
    more:'#'
  },
  {
    id:'chem',
    title:'–ù–µ–æ–Ω–æ–≤–æ–µ —Ö–∏–º–∏—á–µ—Å–∫–æ–µ —à–æ—É ‚Äî 50-55 –º–∏–Ω (12500 ‚ÇΩ)',
    media:[],
    more:'#'
  },
  {
    id:'squid-game',
    title:'–®–æ—É "–ò–≥—Ä–∞ –≤ –ö–∞–ª—å–º–∞—Ä–∞" ‚Äî 60 –º–∏–Ω (7500 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/kIW0aVU'
  },
  {
    id:'agents',
    title:'–ö–≤–µ—Å—Ç "–ê–≥–µ–Ω—Ç—ã –ø–æ–¥ –ø—Ä–∏–∫—Ä—ã—Ç–∏–µ–º" ‚Äî 60 –º–∏–Ω (7000 ‚ÇΩ)',
    media:[],
    more:'#'
  },
  {
    id:'trash',
    title:'–¢–†–ï–®‚Äë–∫–æ—Ä–æ–±–∫–∞ / HARD ‚Äî 5000 / 7000 ‚ÇΩ',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/ghjxEy6'
  },
  {
    id:'guess-drink',
    title:'"–£–≥–∞–¥–∞–π –Ω–∞–ø–∏—Ç–æ–∫" ‚Äî 5000/7000 ‚ÇΩ',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/fOs1bdA'
  },
  {
    id:'playboom',
    title:'"Play Boom" ‚Äî 60 –º–∏–Ω (7000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg',
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/dL8B4hS'
  },
  {
    id:'cocktail',
    title:'–ö–æ–∫—Ç–µ–π–ª—å Party ‚Äî 60 –º–∏–Ω (7000 ‚ÇΩ)',
    media:[
      'https://i.imgur.com/abc1234.jpg'
    ],
    more:'https://imgur.com/a/Q8DAF3I'
  }
  // (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–ø–∏—Å–∞—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–æ—É —Å—Å—ã–ª–∫–∏ –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–ø–∏—Å–∫–∞)
];

/* helper that renders a grid of media thumbnails for a variant */
function renderMediaGrid(container, mediaList, groupName){
  container.innerHTML = '';
  mediaList.forEach((src, idx) => {
    const div = document.createElement('label');
    div.className = 'card-option';
    div.innerHTML = `
      <input type="radio" name="${groupName}" value="${src}">
      <div class="media" style="background-image:url('${src}')"></div>
      <div class="caption">–í–∞—Ä–∏–∞–Ω—Ç ${idx+1}</div>
    `;
    // select logic
    div.addEventListener('click', () => {
      // unselect siblings
      const siblings = container.querySelectorAll('.card-option');
      siblings.forEach(s => s.classList.remove('selected'));
      div.classList.add('selected');
      const input = div.querySelector('input');
      if(input) input.checked = true;
    });
    container.appendChild(div);
  });
}

/* render all servirovka variants: create grouped sections */
const servirovkaGrid = document.getElementById('servirovkaGrid');
servirovka.forEach((group, i) => {
  // group wrapper
  const wrap = document.createElement('div');
  wrap.style.gridColumn = '1/-1';
  const title = document.createElement('div');
  title.style.margin='6px 0 8px';
  title.style.color='#d8d8d8';
  title.textContent = '–í–∞—Ä–∏–∞–Ω—Ç ' + (i+1);
  wrap.appendChild(title);

  const grid = document.createElement('div');
  grid.className = 'options-grid';
  renderMediaGrid(grid, group, 'servirovka_'+(i+1));
  wrap.appendChild(grid);
  servirovkaGrid.appendChild(wrap);
});

/* balloons */
const balloonsGrid = document.getElementById('balloonsGrid');
renderMediaGrid(balloonsGrid, balloons, 'balloons');

/* shows */
const showsGrid = document.getElementById('showsGrid');
shows.forEach(s=>{
  const div = document.createElement('div');
  div.className = 'card-option';
  const mediaSrc = s.media && s.media[0] ? s.media[0] : '';
  div.innerHTML = `
    <div class="media" style="background-image:url('${mediaSrc}')"></div>
    <div class="caption">${s.title}<a class="more" href="${s.more}" target="_blank">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></div>
    <input type="radio" name="show" value="${s.id}" style="display:none"/>
  `;
  div.addEventListener('click', ()=>{
    // deselect others
    document.querySelectorAll('#showsGrid .card-option').forEach(c=>c.classList.remove('selected'));
    div.classList.add('selected');
    const input = div.querySelector('input');
    if(input) input.checked = true;
  });
  showsGrid.appendChild(div);
});

/* phone mask (simple) */
(function(){
  const phone = document.getElementById('phone');
  function mask(e){
    let val = phone.value.replace(/\D/g,'');
    if(val.startsWith('8')) val = '7' + val.slice(1);
    if(!val.startsWith('7')) val = '7' + val;
    const part1 = val.slice(0,1);
    const part2 = val.slice(1,4);
    const part3 = val.slice(4,7);
    const part4 = val.slice(7,9);
    const part5 = val.slice(9,11);
    let out = '+'+part1;
    if(part2) out += ' ('+part2;
    if(part2 && part2.length==3) out += ')';
    if(part3) out += ' '+part3;
    if(part4) out += '-'+part4;
    if(part5) out += '-'+part5;
    phone.value = out;
  }
  phone.addEventListener('input', mask);
  phone.addEventListener('blur', ()=>{ if(phone.value.length<6) phone.value=''; });
})();

/* send button (LOCAL demo ‚Äî replace with fetch to Web App when ready) */
document.getElementById('sendBtn').addEventListener('click', function(e){
  e.preventDefault();
  const payload = {
    phone: document.getElementById('phone').value.trim(),
    name: document.getElementById('birthdayName').value.trim(),
    guests: document.getElementById('guests').value.trim(),
    servirovka: (function(){
      // find checked in servirovka groups
      const vals=[];
      // for each variant group
      for(let i=0;i<document.querySelectorAll('#servirovkaGrid > div').length;i++){
        const name = 'servirovka_'+(i+1);
        const sel = document.querySelector('input[name="'+name+'"]:checked');
        if(sel) vals.push(sel.value);
      }
      return vals;
    })(),
    balloons: (function(){
      const sel = document.querySelector('input[name="balloons"]:checked');
      return sel ? sel.value : '';
    })(),
    show: (function(){
      const sel = document.querySelector('input[name="show"]:checked');
      return sel ? sel.value : '';
    })(),
    wishes: document.getElementById('wishes').value.trim()
  };

  // simple validation
  if(!payload.phone){ document.getElementById('resultMsg').textContent='–£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω'; return; }
  if(!payload.name){ document.getElementById('resultMsg').textContent='–£–∫–∞–∂–∏—Ç–µ –∏–º—è –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞'; return; }

  // display payload (demo)
  document.getElementById('resultMsg').textContent = '–ì–æ—Ç–æ–≤–æ ‚Äî –¥–∞–Ω–Ω—ã–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã (–¥–µ–º–æ).';
  console.log('PAYLOAD:', payload);

  // TODO: replace with fetch to Web App URL:
  // fetch('https://script.google.com/macros/s/ID/exec', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) })
  // .then(r=>r.json()).then(r=>{ ... })
});
</script>
</body>
</html>
